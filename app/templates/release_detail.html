{% extends "base.html" %}

{% block content %}
<h2>{{ release.title }} {% if release.year %}({{ release.year }}){% endif %}</h2>

{% if release.cover_url %}
  <img src="{{ release.cover_url }}" alt="Cover" style="max-width: 300px;" />
{% endif %}

<h3>Songs</h3>
<ul>
  {% for song in release.songs %}
    <li>
      "{{ song.title }}" — {{ song.length // 60 }}:{{ '%02d' % (song.length % 60) }} min
      {% if song.featured_artists %}(feat. {{ song.featured_artists }}){% endif %}

      <form action="/songs/{{ song.id }}/delete" method="post" style="display:inline;">
        <button type="submit" style="color:red;">🗑️</button>
      </form>

      <a href="/songs/{{ song.id }}/edit">✏️</a>
    </li>
  {% endfor %}
</ul>

<h3>Add Song</h3>
<form action="/releases/{{ release.id }}/songs" method="post">
  <input type="text" name="title" placeholder="Song Title" required />
  <input type="number" name="length" placeholder="Length in seconds" />
  <input type="text" name="featured_artists" placeholder="Featured Artists" />
  <button type="submit">Add</button>
</form>

<a href="/artists/{{ release.artist.id }}">← Back to {{ release.artist.name }}</a>
{% endblock %}
